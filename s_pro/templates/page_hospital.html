{% extends 'base.html' %}
{% block title %}
  Hospital page
{% endblock %}
{% block head %}

{% endblock %}

{% block body %}
  <section class="vh-200" style=" background-color: #f4f5f7;">
    <div class="container py-3 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col col-lg-6 mb-4 mb-lg-0" style="width: 1000px;">
          <div class="card mb-3" style="border-radius: .5rem;">
            <div class="row g-0">
              <div class="col-md-4 gradient-custom text-center" style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
                <img src="https://medibhai.com/uploads/hospital_image/hospital-profile-default.jpg" alt="Avatar" class="img-fluid px-5" style="width: 100%; height: 200px; margin-top: 15%;" />
                <h5>{{ hosp.name }}</h5>
                <p></p>
              </div>
              <div class="col-md-8">
                <div class="card-body p-4">
                  <i><h5>Information</h5></i>
                  
                  <div class="row ">
                    <div class="col-6">
                      <h6>Email</h6>
                      <p class="text-muted">{{ hosp.email }}</p>
                    </div>
                    <div class="col-6">
                      <h6>Phone</h6>
                      <p class="text-muted">{{ hosp.contact_no1 }}, {{ hosp.contact_no2 }}</p>
                    </div>
                  </div>
                  <hr class="mt-0" />
                 <i> <h5>Location</h5></i>

                  <div class="row">
                    <div class="col-6">
                      <h6>Address</h6>
                      <p class="text-muted">{{ hosp.location.address }}, near {{ hosp.location.landmark }}</p>
                    </div>
                    <div class="col-6">
                      <h6>City</h6>
                      <p class="text-muted">{{ hosp.location.city }}, {{ hosp.location.state }}</p>
                    </div>
                  </div>
                  <hr class="mt-0 mb-4" />
                 <i><h5>Blood Available</h5></i>
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th scope="col">Blood Group</th>
                        <th scope="col">Quantity (in units)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">A+</th>
                        <td>{{ hosp.blood_quant.bg_A_pos }}</td>
                      </tr>

                      <tr>
                        <th scope="row">A-</th>
                        <td>{{ hosp.blood_quant.bg_A_neg }}</td>
                      </tr>

                      <tr>
                        <th scope="row">B+</th>
                        <td>{{ hosp.blood_quant.bg_B_pos }}</td>
                      </tr>

                      <tr>
                        <th scope="row">B-</th>
                        <td>{{ hosp.blood_quant.bg_B_neg }}</td>
                      </tr>

                      <tr>
                        <th scope="row">AB+</th>
                        <td>{{ hosp.blood_quant.bg_AB_pos }}</td>
                      </tr>

                      <tr>
                        <th scope="row">AB-</th>
                        <td>{{ hosp.blood_quant.bg_AB_neg }}</td>
                      </tr>

                      <tr>
                        <th scope="row">O+</th>
                        <td>{{ hosp.blood_quant.bg_O_pos }}</td>
                      </tr>

                      <tr>
                        <th scope="row">O-</th>
                        <td>{{ hosp.blood_quant.bg_O_neg }}</td>
                      </tr>
                      <tr>
                        <th scope="row">Last Updated</th>
                        <td>{{ hosp.blood_quant.last_updated }}</td>
                      </tr>
                    </tbody>
                  </table>

                  {% with uname=request.session.uname %}
                    {% if uname.0 == 'D' %}
                      <a href="/donor_appoint" class="btn btn-primary">Schedule Appointment</a>
                    {% endif %}
                  {% endwith %}
                </div>
              </div>
            </div>
          </div>
          <button class="btn btn-primary" style="float: right;" onclick="goBack()">Go Back</button>
          <script>
            function goBack() {
              window.history.back()
            }
          </script>
        </div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('form_appoint')
    form.addEventListener('submit', function (event) {
      // form validation code goes here
      event.preventDefault()
      const hosp = document.getElementById('hosp')
      const hospv = hosp.value
    
      let text = 'Do you confirm to ask for appointment to danate blood at ' + hospv
      if (confirm(text) == true) {
        form.submit()
      } else {
      }
    })
  </script>
{% endblock %}
